---
title: "Development"
description: "Set up a local development environment and contribute to MetaMCP"
---

This guide will help you set up a local development environment for MetaMCP and understand how to contribute to the project.

## Development Setup

<AccordionGroup>
  <Accordion icon="github" title="Clone and Install">
    Clone the repository and install dependencies:
    
    ```bash
    git clone https://github.com/metatool-ai/metamcp.git
    cd metamcp
    pnpm install
    ```
    
    <Note>
      MetaMCP uses `pnpm` as the package manager. Make sure you have it installed globally.
    </Note>
  </Accordion>

  <Accordion icon="cog" title="Environment Configuration">
    Set up your environment variables:
    
    ```bash
    cp example.env .env
    ```
    
    Key development environment variables:
    ```bash
    NODE_ENV=development
    APP_URL=http://localhost:3000
    API_URL=http://localhost:3001
    DATABASE_URL=postgresql://postgres:password@localhost:5432/metamcp
    ```
  </Accordion>

  <Accordion icon="database" title="Database Setup">
    Start PostgreSQL using Docker (recommended):
    
    ```bash
    docker run -d \
      --name metamcp-postgres \
      -e POSTGRES_PASSWORD=password \
      -e POSTGRES_DB=metamcp \
      -p 5432:5432 \
      postgres:15
    ```
    
    Or use the full docker-compose setup:
    ```bash
    docker compose up -d postgres
    ```
  </Accordion>

  <Accordion icon="terminal" title="Start Development Server">
    Start the development server:
    
    ```bash
    pnpm dev
    ```
    
    This will start:
    - **Frontend**: `http://localhost:3000` (Next.js)
    - **Backend**: `http://localhost:3001` (Express.js + tRPC)
    
    <Tip>
      Both servers support hot reloading, so changes are reflected immediately.
    </Tip>
  </Accordion>
</AccordionGroup>

## Project Architecture

MetaMCP follows a monorepo structure using Turborepo:

<CodeGroup>
```bash Project Structure
metamcp/
├── apps/
│   ├── frontend/          # Next.js frontend
│   └── backend/           # Express.js + tRPC backend
├── packages/
│   ├── zod-types/         # Shared Zod schemas
│   ├── trpc/              # Shared tRPC routers
│   ├── eslint-config/     # ESLint configurations
│   └── typescript-config/ # TypeScript configurations
└── docs/                  # Documentation (Mintlify)
```

```bash Tech Stack
Frontend:
- Next.js 14 (App Router)
- TailwindCSS + shadcn/ui
- tRPC client
- Better Auth
- Internationalization (i18n)

Backend:
- Express.js
- tRPC server
- Drizzle ORM + PostgreSQL
- Better Auth
- MCP TypeScript SDK

Infrastructure:
- Docker & Docker Compose
- Turborepo
- pnpm workspaces
```
</CodeGroup>

## Development Workflow

### Making Changes

<AccordionGroup>
  <Accordion icon="git" title="Git Workflow">
    1. **Fork the repository** on GitHub
    2. **Create a feature branch**:
       ```bash
       git checkout -b feature/your-feature-name
       ```
    3. **Make your changes** and test them
    4. **Commit your changes**:
       ```bash
       git commit -m "Description of changes"
       ```
    5. **Push to your fork**:
       ```bash
       git push origin feature/your-feature-name
       ```
    6. **Open a Pull Request**
  </Accordion>

  <Accordion icon="code" title="Code Standards">
    - Follow TypeScript best practices
    - Use ESLint and Prettier for code formatting
    - Write descriptive commit messages
    - Add JSDoc comments for complex functions
    - Ensure type safety throughout
    
    Run linting and formatting:
    ```bash
    pnpm lint
    pnpm format
    ```
  </Accordion>

  <Accordion icon="test" title="Testing">
    While writing tests, ensure you:
    - Test both happy path and error cases
    - Mock external dependencies
    - Test tRPC procedures and API endpoints
    - Verify authentication and authorization
    
    ```bash
    pnpm test
    ```
  </Accordion>
</AccordionGroup>

### Database Changes

<AccordionGroup>
  <Accordion icon="database" title="Schema Migrations">
    MetaMCP uses Drizzle ORM for database management:
    
    ```bash
    # Generate migration after schema changes
    cd apps/backend
    pnpm db:generate
    
    # Apply migrations
    pnpm db:migrate
    
    # Reset database (development only)
    pnpm db:reset
    ```
  </Accordion>

  <Accordion icon="table" title="Adding New Tables">
    1. **Update schema** in `apps/backend/src/db/schema.ts`
    2. **Create repository** in `apps/backend/src/db/repositories/`
    3. **Create serializer** in `apps/backend/src/db/serializers/`
    4. **Add tRPC procedures** in `apps/backend/src/trpc/`
    5. **Update frontend types** in `packages/zod-types/`
  </Accordion>
</AccordionGroup>

## Authentication Development

### OIDC Provider Setup

MetaMCP supports OpenID Connect for enterprise SSO:

<AccordionGroup>
  <Accordion icon="shield" title="Configuration">
    Add OIDC environment variables to your `.env`:
    
    ```bash
    # Required
    OIDC_CLIENT_ID=your-oidc-client-id
    OIDC_CLIENT_SECRET=your-oidc-client-secret
    OIDC_DISCOVERY_URL=https://your-provider.com/.well-known/openid-configuration
    OIDC_AUTHORIZATION_URL=https://your-provider.com/auth/authorize
    
    # Optional
    OIDC_PROVIDER_ID=oidc
    OIDC_SCOPES=openid email profile
    OIDC_PKCE=true
    ```
  </Accordion>

  <Accordion icon="wrench" title="Testing OIDC">
    For development testing:
    
    1. **Use a test provider** like Auth0 or create a Keycloak instance
    2. **Configure redirect URI**: `${APP_URL}/api/auth/oauth2/callback/oidc`
    3. **Test the flow** in your browser
    4. **Check user creation** in the database
    
    <Tip>
      Enable debug logging in `apps/backend/src/auth.ts` to see detailed OIDC flow information.
    </Tip>
  </Accordion>
</AccordionGroup>

## MCP Server Development

### Adding MCP Server Support

<AccordionGroup>
  <Accordion icon="server" title="Server Types">
    MetaMCP supports different MCP server types:
    
    - **STDIO**: Command-line servers (most common)
    - **HTTP**: HTTP-based MCP servers
    - **WebSocket**: Real-time MCP servers
    
    Add support in `apps/backend/src/lib/metamcp/mcp-server-pool.ts`
  </Accordion>

  <Accordion icon="filter" title="Middleware Development">
    Create custom middleware for namespaces:
    
    ```typescript
    // apps/backend/src/lib/metamcp/metamcp-middleware/
    export interface MiddlewareContext {
      request: MCPRequest;
      response?: MCPResponse;
      namespace: Namespace;
      server: MCPServer;
    }
    
    export type Middleware = (
      context: MiddlewareContext,
      next: () => Promise<MCPResponse>
    ) => Promise<MCPResponse>;
    ```
  </Accordion>
</AccordionGroup>

## Frontend Development

### Component Development

<AccordionGroup>
  <Accordion icon="component" title="UI Components">
    MetaMCP uses shadcn/ui components:
    
    ```bash
    # Add new shadcn/ui components
    cd apps/frontend
    npx shadcn-ui@latest add [component-name]
    ```
    
    Components are located in `apps/frontend/components/ui/`
  </Accordion>

  <Accordion icon="globe" title="Internationalization">
    Add translations for new features:
    
    1. **Update English** in `apps/frontend/public/locales/en/`
    2. **Add other languages** in respective locale folders
    3. **Use translations** with `useTranslations()` hook
    
    ```typescript
    const { t } = useTranslations();
    return <span>{t('common:save')}</span>;
    ```
  </Accordion>
</AccordionGroup>

## Debugging

### Common Development Issues

<AccordionGroup>
  <Accordion icon="bug" title="Backend Debugging">
    - **tRPC errors**: Check procedure definitions and input validation
    - **Database issues**: Verify connection string and migrations
    - **MCP server issues**: Check server configurations and logs
    - **Auth issues**: Verify session handling and API key validation
    
    Enable verbose logging:
    ```bash
    DEBUG=metamcp:* pnpm dev
    ```
  </Accordion>

  <Accordion icon="browser" title="Frontend Debugging">
    - **Hydration errors**: Ensure server/client consistency
    - **tRPC issues**: Check network tab for API errors
    - **i18n problems**: Verify translation keys and locale setup
    - **UI issues**: Use React DevTools and browser inspector
  </Accordion>
</AccordionGroup>

## Pull Request Guidelines

When submitting a pull request:

<Card title="PR Checklist" icon="checklist">
  - [ ] Clear description of changes
  - [ ] All tests pass
  - [ ] Code follows project standards
  - [ ] Database migrations included (if applicable)
  - [ ] Documentation updated
  - [ ] Tested in development environment
  - [ ] No breaking changes (or clearly documented)
</Card>

## Getting Help

<CardGroup cols={2}>
  <Card title="Discord Community" icon="discord" href="https://discord.gg/mNsyat7mFX">
    Join our Discord for development discussions and support
  </Card>
  
  <Card title="GitHub Issues" icon="github" href="https://github.com/metatool-ai/metamcp/issues">
    Report bugs, request features, or ask questions
  </Card>
  
  <Card title="Contributing Guide" href="/development/contributing">
    Detailed contributing guidelines and code of conduct
  </Card>
  
  <Card title="Architecture Guide" href="/development/architecture">
    Deep dive into MetaMCP's technical architecture
  </Card>
</CardGroup>
