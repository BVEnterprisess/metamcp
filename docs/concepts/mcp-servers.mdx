---
title: "MCP Servers"
description: "Learn how to configure and manage MCP server instances in MetaMCP"
---

A **MCP Server** is a configuration that tells MetaMCP how to start and manage a Model Context Protocol server. These servers provide tools, resources, and prompts that can be aggregated and exposed through MetaMCP endpoints.

## What is a MCP Server?

MCP Servers are the building blocks of MetaMCP. Each server configuration defines:

- **How to start the server** (command, arguments, environment)
- **What type of server it is** (STDIO, SSE, Streamable HTTP)
- **Authentication requirements** (if any)
- **Resource dependencies** (Python packages, Node modules, etc.)

<Card title="Example Configuration" icon="code">
```json
{
  "name": "HackerNews",
  "type": "STDIO", 
  "command": "uvx",
  "args": ["mcp-hn"],
  "description": "Access HackerNews stories and comments"
}
```
</Card>

## Server Types

MetaMCP supports different types of MCP servers:

<AccordionGroup>
  <Accordion icon="terminal" title="STDIO Servers">
    **Most common type** - Communicates via standard input/output streams
    
    ```json
    {
      "type": "STDIO",
      "command": "uvx", 
      "args": ["mcp-server-package"],
      "env": {
        "API_KEY": "your-api-key"
      }
    }
    ```
    
    **Use cases:**
    - Python packages installed via `uvx`
    - Node.js packages via `npx`
    - Custom executable scripts
  </Accordion>

  <Accordion icon="globe" title="HTTP Servers">
    **For web-based MCP servers** - Communicates via HTTP requests
    
    ```json
    {
      "type": "HTTP",
      "baseUrl": "https://api.example.com/mcp",
      "headers": {
        "Authorization": "Bearer token"
      }
    }
    ```
    
    **Use cases:**
    - Remote MCP services
    - Cloud-hosted MCP servers
    - Existing HTTP APIs wrapped as MCP
  </Accordion>

  <Accordion icon="network-wired" title="WebSocket Servers">
    **For real-time communication** - Uses WebSocket connections
    
    ```json
    {
      "type": "WEBSOCKET",
      "url": "wss://realtime.example.com/mcp",
      "protocols": ["mcp"]
    }
    ```
    
    **Use cases:**
    - Real-time data streams
    - Live collaborative tools
    - Event-driven MCP servers
  </Accordion>
</AccordionGroup>

## Configuration Options

### Basic Configuration

<CodeGroup>
```json Required Fields
{
  "name": "unique-server-name",
  "type": "STDIO|HTTP|WEBSOCKET",
  "command": "command-to-run", // STDIO only
  "args": ["arg1", "arg2"],     // STDIO only
  "baseUrl": "https://...",     // HTTP only
  "url": "wss://..."           // WebSocket only
}
```

```json Optional Fields
{
  "description": "Human-readable description",
  "env": {
    "KEY": "value"
  },
  "timeout": 30000,
  "maxRetries": 3,
  "headers": {              // HTTP only
    "Authorization": "Bearer token"
  },
  "protocols": ["mcp"]      // WebSocket only
}
```
</CodeGroup>

### Environment Variables

Pass environment variables to STDIO servers:

```json
{
  "name": "WeatherAPI",
  "type": "STDIO",
  "command": "python",
  "args": ["-m", "weather_mcp"],
  "env": {
    "WEATHER_API_KEY": "your-api-key",
    "WEATHER_UNITS": "metric"
  }
}
```

### Authentication

For servers requiring authentication:

<CodeGroup>
```json API Key Authentication
{
  "env": {
    "API_KEY": "your-secret-key"
  }
}
```

```json OAuth Token
{
  "env": {
    "OAUTH_TOKEN": "oauth-access-token",
    "OAUTH_REFRESH_TOKEN": "refresh-token"
  }
}
```

```json HTTP Headers
{
  "headers": {
    "Authorization": "Bearer token",
    "X-API-Key": "api-key"
  }
}
```
</CodeGroup>

## Managing MCP Servers

### Adding Servers

1. **Navigate** to MCP Servers in the MetaMCP dashboard
2. **Click** "Add Server" 
3. **Configure** the server details
4. **Test** the configuration
5. **Save** to make it available for namespaces

### Server Status

MetaMCP tracks the status of each server:

- **üü¢ Online**: Server is running and responsive
- **üü° Starting**: Server is being initialized
- **üî¥ Offline**: Server is not responding or failed to start
- **‚ö†Ô∏è Error**: Server encountered an error

### Idle Session Management

MetaMCP pre-allocates idle sessions for better performance:

<Card title="Cold Start Optimization" icon="zap">
- **Default**: 1 idle session per server
- **Configurable**: Adjust based on usage patterns
- **Auto-scaling**: Sessions created on demand
- **Cleanup**: Idle sessions recycled after timeout
</Card>

## Popular MCP Servers

Here are some commonly used MCP servers you can add to MetaMCP:

<CardGroup cols={2}>
  <Card title="HackerNews" icon="news">
    ```json
    {
      "name": "HackerNews",
      "type": "STDIO",
      "command": "uvx",
      "args": ["mcp-hn"]
    }
    ```
  </Card>

  <Card title="File System" icon="folder">
    ```json
    {
      "name": "FileSystem",
      "type": "STDIO", 
      "command": "uvx",
      "args": ["mcp-server-filesystem"]
    }
    ```
  </Card>

  <Card title="Git Tools" icon="git">
    ```json
    {
      "name": "Git",
      "type": "STDIO",
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-git"]
    }
    ```
  </Card>

  <Card title="Weather API" icon="cloud">
    ```json
    {
      "name": "Weather",
      "type": "STDIO",
      "command": "python",
      "args": ["-m", "weather_mcp"],
      "env": {
        "API_KEY": "your-weather-api-key"
      }
    }
    ```
  </Card>
</CardGroup>

## Custom Dockerfile for Dependencies

If your MCP servers require additional dependencies beyond `uvx` or `npx`, you can customize the MetaMCP Dockerfile:

```dockerfile
FROM metamcp:latest

# Install Python dependencies
RUN pip install requests beautifulsoup4

# Install system packages
RUN apt-get update && apt-get install -y \
    curl \
    git \
    && rm -rf /var/lib/apt/lists/*

# Install Node.js packages globally
RUN npm install -g some-mcp-package
```

<Warning>
Custom dependencies increase the Docker image size and startup time. Consider using lightweight alternatives when possible.
</Warning>

## Troubleshooting

<AccordionGroup>
  <Accordion icon="warning" title="Server Won't Start">
    **Common causes:**
    - Missing dependencies (install via custom Dockerfile)
    - Incorrect command or arguments
    - Environment variables not set
    - Network connectivity issues (for HTTP/WebSocket)
    
    **Debug steps:**
    1. Check server logs in MetaMCP dashboard
    2. Test command manually in terminal
    3. Verify environment variables
    4. Check network connectivity
  </Accordion>

  <Accordion icon="clock" title="Slow Performance">
    **Optimization strategies:**
    - Increase idle session count for frequently used servers
    - Use local servers instead of remote when possible
    - Pre-install dependencies in custom Docker image
    - Configure appropriate timeout values
  </Accordion>

  <Accordion icon="shield" title="Authentication Issues">
    **Common problems:**
    - Expired API keys or OAuth tokens
    - Incorrect environment variable names
    - Missing required headers
    - Rate limiting from external APIs
    
    **Solutions:**
    1. Refresh API keys/tokens
    2. Check server documentation for required auth
    3. Implement proper error handling
    4. Add retry logic with backoff
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Create Namespaces" icon="folder" href="/concepts/namespaces">
    Group your MCP servers into organized namespaces
  </Card>
  
  <Card title="Set Up Endpoints" icon="globe" href="/concepts/endpoints">
    Create public endpoints to access your servers
  </Card>
  
  <Card title="Add Middleware" icon="filter" href="/concepts/middleware">
    Transform and filter MCP requests and responses
  </Card>
  
  <Card title="Integration Guide" icon="plug" href="/integrations/cursor">
    Connect your configured servers to MCP clients
  </Card>
</CardGroup> 